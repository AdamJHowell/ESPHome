# bme688.yaml
#sensor:
platform: bme680
address: 0x77
update_interval: 20s

temperature:
    name:                "BME688 Temperature"
    id:                  bme688_temp
    device_class:        "temperature"
    unit_of_measurement: "Â°C"
    accuracy_decimals:   1
    oversampling:        16x
    on_value:
      - mqtt.publish:
          topic:           "$mqtt_location/$mqtt_device/bme688/temp"
          payload:         !lambda |-
            return to_string( x );

pressure:
    name:                "BME688 Pressure"
    id:                  bme688_pressure
    device_class:        "atmospheric_pressure"
    unit_of_measurement: "hPa"
    accuracy_decimals:   1
    on_value:
      - mqtt.publish:
          topic:           "$mqtt_location/$mqtt_device/bme688/pressure"
          payload:         !lambda |- 
                             return to_string( x );

humidity:
    name:                "BME688 Humidity"
    id:                  bme688_humidity
    device_class:        "humidity"
    unit_of_measurement: "%"
    accuracy_decimals:   1
    on_value:
      - mqtt.publish:
          topic:           "$mqtt_location/$mqtt_device/bme688/humidity"
          payload:         !lambda |- 
                             return to_string( x );

gas_resistance:
    name:              "BME688 Gas Resistance"
    id:                bme688_gas_resistance
    device_class:      "aqi"
    accuracy_decimals: 0
    on_value:
      - mqtt.publish:
          topic:           "$mqtt_location/$mqtt_device/bme688/gas"
          payload:         !lambda |- 
                             return to_string( x );

# platform: template
#     name: "BME688 Indoor Air Quality"
#     id: iaq
#     icon: "mdi:gauge"
#     # calculation: comp_gas = log(R_gas[ohm]) + 0.04 log(Ohm)/%rh * hum[%rh]
#     lambda: !lambda |-
#       return to_string( x );
